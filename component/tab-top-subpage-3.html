<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>Hello MUI</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<link rel="stylesheet" href="../css/mui.min.css">
			<!--自定义样式-->
		<link rel="stylesheet" type="text/css" href="../css/style.css"/>
		<link rel="stylesheet" type="text/css" href="../css/component/list-style.css"/>
	</head>

	<body>
		<div id="pullrefresh" class="mui-content mui-scroll-wrapper">
			<div class="mui-scroll">
				暂无数据...
			</div>
		</div>
		<script src="../js/mui.min.js"></script>
		<script src="../js/dataFormat.js" type="text/javascript" charset="utf-8"></script>
		<script>
			mui.init({
				swipeBack: false,
				keyEventBind: {
					backbutton: false //关闭back按键监听
				},
				pullRefresh: {
					container: '#pullrefresh',
					up: {
						contentrefresh: '正在加载...',
						callback: pullupRefresh
					}
				}
			});
			mui.plusReady(function(){
				//plus.nativeUI.showWaiting();
				/*mui.get('http://supplier.foxconn.com/yupin/api/ImageProgress/GetList',{ userID:"F3229346",Page:"1",pageSize:"5" } ,function(response){
						//获得服务器响应
						var alldata=response;
						console.log(response)
						var table = document.body.querySelector('.mui-table-view');
						for (let data of alldata) {
							if(data.status==2){
							let li = document.createElement('li');
							li.className = 'mui-table-view-cell';
							li.innerHTML = `<li class="mui-table-view-cell mui-media">
									<a href="javascript:;">
										<img class="mui-media-object mui-pull-left" src=${data.imgUrl}>
										<div class="mui-media-body">
											<p class='mui-ellipsis color-black'>${data.remark}</p>
											<p class='mui-ellipsis'><span class="span-left">${new Date(data.update_date).Format('yyyy-MM-dd')}</span><span class="span-right">${data.userName}</span></p>
										</div>
									</a>
								</li>`;
							table.appendChild(li);
							}
						}
						setTimeout(function(){
							//plus.nativeUI.closeWaiting();
						},500)
						
					},'json'
				);*/
			})
			var count = 1;
			/**
			 * 上拉加载具体业务实现
			 */
			function pullupRefresh() {
				setTimeout(function() {
					/*var cells = document.body.querySelectorAll('.mui-table-view-cell');
					mui.get('http://supplier.foxconn.com/yupin/api/ImageProgress/GetList',{ userID:"F3229346",Page:++count,pageSize:"5" } ,function(response){
						//获得服务器响应
						var alldata=response;
						var table = document.body.querySelector('.mui-table-view');
						if(alldata)
						for (let data of alldata) {
							let li = document.createElement('li');
							li.className = 'mui-table-view-cell';
							li.innerHTML = `<li class="mui-table-view-cell mui-media">
									<a href="javascript:;">
										<img class="mui-media-object mui-pull-left" src=${data.imgUrl}>
										<div class="mui-media-body">
											<p class='mui-ellipsis color-black'>${data.remark}</p>
											<p class='mui-ellipsis'><span class="span-left">${new Date(data.update_date).Format('yyyy-MM-dd')}</span><span class="span-right">${data.userName}</span></p>
										</div>
									</a>
								</li>`;
							table.appendChild(li);
						}
						mui('#pullrefresh').pullRefresh().endPullupToRefresh(alldata.length<5);
					},'json'
				);*/
				}, 1000);
			}
			//单击事件
			mui('body').on('tap', '.mui-scroll li', function(e){
				var h=this.getElementsByTagName('h4');
				console.log('单机了'+h[0].innerHTML );
				mui.openWindowWithTitle({
				    url:'edit.html',
				    id:'edit'
				},{
					backgroundColor:"#f4645f",//导航栏背景色
				    title:{//标题配置
				        text:h[0].innerHTML,//标题文字
				        styles:{//绘制文本样式，参考：http://www.html5plus.org/doc/zh_cn/nativeobj.html#plus.nativeObj.TextStyles
				            color:"#f0f0f0",
				            align:"center",
				            family:"'Helvetica Neue',Helvetica,sans-serif",
				            size:"17px",
				            style:"normal",
				            weight:"normal",
				            fontSrc:""
				        },
				    },
				    back:{//左上角返回箭头
				        image:{
				            base64Data:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABd0lEQVR4Xu3Y4Q2CQAwFYG4UN8FJlI3cQEbRDXQTN8BeIgkxhPtB3/WVKwm/iCfvu1ZzTV3jV2o8fxcAUQGNC0QLNF4A8SMYLRAt0LhAtEDjBcD7LzBN0002Z0wpvZCbRNkCEn6U0Be5P3KfkQh0AIvw88ZDEagAVsLPCE+pgh7RCjQAG+HfErwXgFwJ6hcFgFX4rGkOYBneHMA6vCkAQ3gzAJbwJgBM4asDsIWvCsAYvhoAa/gqAMzh4QDs4aEAHsLDALyEhwB4Cq8O4C28KoCEv8qC95UDez7Hn1Dn+b0DAtXj8EYF5OHmsPdlEZ9XBcgv6A1BHcAbAgTAEwIMwAsCFMADAhyAHaEKADNCNQBWhKoAjAjVAdgQTACYEMwAWBBMARgQzAGsESgALBFoAKwQqAA2EAYZqIwuBiIaL/k3VIGFV50JagRfrvFDeKB2fv4uuhbQhiytFwAloaM/jwo4+g6X8kUFlISO/jwq4Og7XMrXfAV8AXit4EEot4OAAAAAAElFTkSuQmCC'
				        }
				    }
				})
			})
		</script>
	</body>

</html>